<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>자유게시판</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- 헤더 CSS -->
  <link rel="stylesheet" th:href="@{/css/layout/header.css}">
</head>

<body style="background-color:#f8f9fa;">

<!-- 상단 헤더 -->
<div th:replace="~{layout/header :: header}"></div>

<div class="container py-4">
  <h3 class="mb-3">자유게시판</h3>

  <div class="d-flex justify-content-end align-items-center gap-2 mb-3">
    <form class="d-flex" th:action="@{/board}" method="get" style="width: 220px;">
      <input class="form-control form-control-sm me-1" name="search" type="search" placeholder="검색..." />
      <button class="btn btn-outline-primary btn-sm" type="submit">검색</button>
    </form>
    <a class="btn btn-primary btn-sm" th:href="@{/board/write}">글쓰기</a>
  </div>

  <table class="table table-hover bg-white rounded shadow-sm">
    <thead class="table-light">
    <tr>
      <th>번호</th>
      <th>제목</th>
      <th>작성자</th>
      <th>작성일</th>
      <th>조회수</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="post, i : ${posts.content}">
      <td th:text="${#numbers.formatInteger(posts.totalElements - (posts.number * posts.size) - i.index, 0)}"></td>
      <td>
        <a th:href="@{'/board/' + ${post.id}}" th:text="${post.title}" class="text-decoration-none text-dark"></a>
      </td>
      <td th:text="${post.memberName}"></td>
      <td th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd')}"></td>
      <td th:text="${post.count}"></td>
    </tr>
    </tbody>
  </table>

  <!-- 페이지네이션 -->
  <nav th:if="${posts.totalPages > 1}" class="mt-4">
    <ul class="pagination justify-content-center">
      <li class="page-item" th:classappend="${posts.first}? 'disabled'">
        <a class="page-link" th:href="@{/board(page=${posts.number - 1})}">이전</a>
      </li>
      <li class="page-item" th:each="i : ${#numbers.sequence(0, posts.totalPages-1)}"
          th:classappend="${i == posts.number}? 'active'">
        <a class="page-link" th:href="@{/board(page=${i})}" th:text="${i+1}">1</a>
      </li>
      <li class="page-item" th:classappend="${posts.last}? 'disabled'">
        <a class="page-link" th:href="@{/board(page=${posts.number + 1})}">다음</a>
      </li>
    </ul>
  </nav>
</div>

<!-- 하단 푸터  -->
<div th:replace="~{layout/footer :: footer}"></div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/layout/header.js" defer></script>
</body>
</html>